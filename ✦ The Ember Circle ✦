// index.js
const { Client, GatewayIntentBits, PermissionsBitField } = require('discord.js');
const client = new Client({
    intents: [GatewayIntentBits.Guilds, GatewayIntentBits.GuildMessages, GatewayIntentBits.MessageContent]
});

const TOKEN = process.env.DISCORD_TOKEN;
const MY_ID = '1150291790419726346'; // ID Ø­Ø³Ø§Ø¨Ùƒ

// Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¤Ù‚ØªØ© Ù„Ù„Ø¹Ù…Ù„Ø§Øª
let coins = {}; // Ù‡ÙŠØ®Ø²Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø­Ø³Ø¨ userId

client.once('ready', () => {
    console.log(`Logged in as ${client.user.tag}!`);
});

client.on('messageCreate', async message => {
    if (message.author.bot) return;

    const args = message.content.split(' ');
    const command = args[0];

    // ---- Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ----
    if (command === '!Ù…Ø³Ø­') {
        if (!message.member.permissions.has(PermissionsBitField.Flags.ManageMessages)) 
            return message.reply('Ø£Ù†Øª Ù…Ø´ Ø¹Ù†Ø¯Ùƒ ØµÙ„Ø§Ø­ÙŠØ©.');
        let deleteCount = parseInt(args[1], 10);
        if (!deleteCount || deleteCount < 1 || deleteCount > 100) 
            return message.reply('Ø§ÙƒØªØ¨ Ø±Ù‚Ù… Ø¨ÙŠÙ† 1 Ùˆ 100.');
        await message.channel.bulkDelete(deleteCount, true);
        message.channel.send(`${deleteCount} Ø±Ø³Ø§Ù„Ø© ØªÙ… Ù…Ø³Ø­Ù‡Ù… âœ…`).then(msg => setTimeout(() => msg.delete(), 5000));
    }

    if (command === '!Ø¨Ø§Ù†') {
        if (!message.member.permissions.has(PermissionsBitField.Flags.BanMembers)) 
            return message.reply('Ø£Ù†Øª Ù…Ø´ Ø¹Ù†Ø¯Ùƒ ØµÙ„Ø§Ø­ÙŠØ©.');
        const member = message.mentions.members.first();
        if (!member) return message.reply('Ù…Ù†Ø´Ù† Ø§Ù„Ø¹Ø¶Ùˆ Ø§Ù„Ù„ÙŠ Ø¹Ø§ÙŠØ² ØªØ¹Ù…Ù„Ù‡ Ø¨Ø§Ù†.');
        const reason = args.slice(2).join(' ') || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¨Ø¨';
        await member.ban({ reason });
        message.channel.send(`${member.user.tag} ØªÙ… Ø¹Ù…Ù„Ù‡ Ø¨Ø§Ù† âœ…`);
    }

    if (command === '!unban') {
        if (!message.member.permissions.has(PermissionsBitField.Flags.BanMembers)) 
            return message.reply('Ø£Ù†Øª Ù…Ø´ Ø¹Ù†Ø¯Ùƒ ØµÙ„Ø§Ø­ÙŠØ©.');
        const userId = args[1];
        if (!userId) return message.reply('Ø§ÙƒØªØ¨ ID Ø§Ù„Ø¹Ø¶Ùˆ.');
        try {
            await message.guild.members.unban(userId);
            message.channel.send(`ØªÙ… Ø±ÙØ¹ Ø§Ù„Ø¨Ø§Ù† Ø¹Ù† Ø§Ù„Ø¹Ø¶Ùˆ âœ…`);
        } catch {
            message.reply('Ù…Ø´ Ù‚Ø§Ø¯Ø± Ø£Ù„Ø§Ù‚ÙŠ Ø§Ù„Ø¹Ø¶Ùˆ.');
        }
    }

    if (command === '!mute') {
        if (!message.member.permissions.has(PermissionsBitField.Flags.ModerateMembers)) 
            return message.reply('Ø£Ù†Øª Ù…Ø´ Ø¹Ù†Ø¯Ùƒ ØµÙ„Ø§Ø­ÙŠØ©.');
        const member = message.mentions.members.first();
        if (!member) return message.reply('Ù…Ù†Ø´Ù† Ø§Ù„Ø¹Ø¶Ùˆ.');
        let duration = args[2] || '10m'; // 10 Ø¯Ù‚Ø§Ø¦Ù‚ Ø§ÙØªØ±Ø§Ø¶ÙŠ
        let time = parseInt(duration);
        member.timeout(time * 60000).catch(() => message.reply('Ù…Ø´ Ù‚Ø§Ø¯Ø± Ø£Ø¹Ù…Ù„Ù‡ Ù…ÙŠÙˆØª.'));
        message.channel.send(`${member.user.tag} ØªÙ… Ø¹Ù…Ù„Ù‡ Ù…ÙŠÙˆØª âœ…`);
    }

    if (command === '!unmute') {
        if (!message.member.permissions.has(PermissionsBitField.Flags.ModerateMembers)) 
            return message.reply('Ø£Ù†Øª Ù…Ø´ Ø¹Ù†Ø¯Ùƒ ØµÙ„Ø§Ø­ÙŠØ©.');
        const member = message.mentions.members.first();
        if (!member) return message.reply('Ù…Ù†Ø´Ù† Ø§Ù„Ø¹Ø¶Ùˆ.');
        member.timeout(null).catch(() => message.reply('Ù…Ø´ Ù‚Ø§Ø¯Ø± Ø£Ø±ÙØ¹ Ø§Ù„Ù…ÙŠÙˆØª.'));
        message.channel.send(`${member.user.tag} ØªÙ… Ø±ÙØ¹ Ø§Ù„Ù…ÙŠÙˆØª âœ…`);
    }

    // ---- Ø£Ù„Ø¹Ø§Ø¨ Ø¨Ø³ÙŠØ·Ø© ----
    if (command === '!coinflip') {
        const sides = ['ÙˆØ¬Ù‡', 'ÙƒØªØ§Ø¨Ø©'];
        const result = sides[Math.floor(Math.random() * sides.length)];
        message.reply(`Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${result}`);
    }

    if (command === '!roll') {
        const result = Math.floor(Math.random() * 6) + 1;
        message.reply(`Ø·Ù„Ø¹ØªÙ„Ùƒ Ø±Ù‚Ù…: ${result}`);
    }

    // ---- Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„Ø§Øª Ù„Ùƒ ÙÙ‚Ø· ----
    if (command === '!addcoins' && message.author.id === MY_ID) {
        coins[message.author.id] = (coins[message.author.id] || 0) + 10000000;
        message.reply('ØªÙ… Ø¥Ø¶Ø§ÙØ© 10m Ø¹Ù…Ù„Ø© âœ…');
    }

    // ---- Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù…Ù„Ø§Øª ----
    if (command === '!coins') {
        const balance = coins[message.author.id] || 0;
        message.reply(`Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ: ${balance} Ø¹Ù…Ù„Ø© ğŸ’°`);
    }
});

client.login(TOKEN);
